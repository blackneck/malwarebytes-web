import { AxiosRequestConfig } from "axios";
import queryString from "query-string";

import WebsocketConnection from "../../services/websockets";
import { GetProductsParameters, UpdateProductsParameters } from "./types";

export const getProductsRequestConfig = ({
  page,
}: GetProductsParameters): AxiosRequestConfig => {
  const query = queryString.stringify({ page });

  return {
    url: `/products?${query}`,
    method: "GET",
  };
};

export const updateProductsRequestConfig = ({
  delta,
  id,
}: UpdateProductsParameters): AxiosRequestConfig => {
  const socketId = WebsocketConnection.getInstance().socket.id;
  return {
    url: `/products/${id}`,
    method: "PATCH",
    data: {
      delta,
      socketId,
    },
  };
};

import React from "react";
import {
  Button,
  IconButton,
  Grid,
  Modal,
  Container,
  Paper,
} from "@material-ui/core";
import CloseIcon from "@material-ui/icons/Close";

import QuantityLabel from "src/common/components/QuantityLabel";
import { ProductModalProps } from "../../types";
import styles from "./styles";

const ProductModal = ({
  currentProduct,
  addToCart,
  removeFromCart,
  closeModal,
  amountInCart,
}: ProductModalProps) => {
  const classes = styles();

  return (
    <Modal
      className={classes.modal}
      open={Boolean(currentProduct)}
      onClose={closeModal}
      disableEnforceFocus={true}
      disableRestoreFocus={true}
      disableAutoFocus={true}
    >
      <Container className={classes.container} maxWidth="sm">
        <Paper className={classes.paper}>
          <IconButton className={classes.closeButton} onClick={closeModal}>
            <CloseIcon />
          </IconButton>
          <Grid
            container
            className={classes.modalContentContainer}
            justify="space-between"
          >
            <Grid item container lg={7}>
              <span className={classes.nameLabel}>{currentProduct.name}</span>
              <span>{currentProduct.description}</span>
            </Grid>
            <Grid
              container
              item
              lg={4}
              direction="column"
              justify="space-evenly"
              alignItems="stretch"
              spacing={1}
            >
              <Grid
                item
                container
                className={classes.buttonContainer}
                justify="space-between"
                alignItems="center"
              >
                <span className={classes.priceLabel}>
                  ${currentProduct.price}
                </span>
                <QuantityLabel quantity={currentProduct.quantity} />
              </Grid>
              <Grid item className={classes.buttonContainer}>
                <Button
                  onClick={addToCart}
                  className={classes.button}
                  variant="contained"
                  size="small"
                  color="primary"
                  disabled={!currentProduct.quantity}
                >
                  add to cart
                </Button>
              </Grid>
              <Grid item className={classes.buttonContainer}>
                <Button
                  onClick={removeFromCart}
                  className={classes.button}
                  variant="outlined"
                  size="small"
                  color="secondary"
                  disabled={!amountInCart}
                >
                  remove from cart
                </Button>
              </Grid>
              <Grid item className={classes.buttonContainer}>
                <span>this item in cart: {amountInCart}</span>
              </Grid>
              <Grid item className={classes.buttonContainer}>
                <Button
                  className={classes.button}
                  variant="text"
                  size="small"
                  onClick={closeModal}
                >
                  close
                </Button>
              </Grid>
            </Grid>
          </Grid>
        </Paper>
      </Container>
    </Modal>
  );
};

export default ProductModal;

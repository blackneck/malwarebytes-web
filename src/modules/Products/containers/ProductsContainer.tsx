import React, { useEffect } from "react";
import { useDispatch, useSelector } from "react-redux";

import Products from "../components/Products";
import { getProductsRequest } from "../actions";
import { getProducts, getPage, getCurrentProduct } from "../selectors";

const ProductsContainer = () => {
  const currentProduct = useSelector(getCurrentProduct);
  const products = useSelector(getProducts);
  const page = useSelector(getPage);

  const dispatch = useDispatch();

  useEffect(() => {
    dispatch(getProductsRequest({ page }));
  }, [dispatch, page]);

  return <Products products={products} currentProduct={currentProduct} />;
};

export default ProductsContainer;

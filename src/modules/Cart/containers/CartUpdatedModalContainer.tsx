import React, { useCallback, useMemo } from "react";
import { useDispatch } from "react-redux";

import { setCartUpdatedProduct } from "../actions";
import CartUpdatedModal from "../components/CartUpdatedModal";
import { generateDeltaPhrase } from "../helpers";

const CartUpdatedModalContainer = ({
  updatedProduct,
}: {
  updatedProduct: { id: string; delta: number; name: string };
}) => {
  const dispatch = useDispatch();

  const closeModal = useCallback(() => {
    dispatch(setCartUpdatedProduct());
  }, [dispatch]);

  const deltaPhrase = useMemo(() => generateDeltaPhrase(updatedProduct.delta), [
    updatedProduct.delta,
  ]);

  return (
    <CartUpdatedModal
      closeModal={closeModal}
      isOpened={Boolean(updatedProduct)}
      deltaPhrase={deltaPhrase}
      productName={updatedProduct.name}
    />
  );
};

export default CartUpdatedModalContainer;

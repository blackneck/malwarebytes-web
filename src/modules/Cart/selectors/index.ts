import { createSelector } from "reselect";

import { getProductsScheme } from "src/modules//Products/selectors";
import { CartState } from "../types";

export const getCart = ({ cart }: { cart: CartState }) => cart.products;

export const getCartQuantity = createSelector(getCart, (cart) => {
  return Object.values(cart).reduce(
    (totalQuantity, currentProductQuantity) =>
      (totalQuantity += currentProductQuantity),
    0
  );
});

export const getCartProductUpdate = ({ cart }: { cart: CartState }) =>
  cart.updatedProduct;

export const getUpdatedProduct = createSelector(
  getProductsScheme,
  getCartProductUpdate,
  (productsScheme, updatedProduct) =>
    updatedProduct
      ? {
          ...productsScheme[updatedProduct.id],
          ...updatedProduct,
        }
      : undefined
);
